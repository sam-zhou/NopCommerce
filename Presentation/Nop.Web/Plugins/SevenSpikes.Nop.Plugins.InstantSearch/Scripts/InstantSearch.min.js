/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

!function(t){t(document).ready(function(){var a=t(".instantSearchResourceElement");0!==a.length&&(t("#instant-search-categories").length>0&&(t(".search-box-text").addClass("narrow"),t(".store-search-box").addClass("with-caregory-search-enabled")),t("#small-searchterms").kendoAutoComplete({highlightFirst:"true"===a.attr("data-highlightFirstFoundElement"),minLength:parseInt(a.attr("data-minKeywordLength"))||0,dataTextField:"ProductName",filter:"contains",popup:{appendTo:t("#small-search-box-form")},template:kendo.template(t("#instantSearchItemTemplate").html()),dataSource:new kendo.data.DataSource({serverFiltering:!0,requestStart:function(){t("#small-searchterms").addClass("instant-search-busy")},change:function(){t("#small-searchterms").removeClass("instant-search-busy")},transport:{read:a.attr("data-instantSearchUrl"),parameterMap:function(){return{q:t("#small-searchterms").val(),categoryId:t("#instant-search-categories").val()}}}}),change:function(){var a=t(".k-list").find(".k-state-selected"),e=a.find(".instant-search-item").attr("data-url");"undefined"==typeof e||setLocation(e)},dataBound:function(){t("#small-searchterms").data("kendoAutoComplete").list.parent(".k-animation-container").addClass("instantSearch"),t("#instant-search-categories").length>0&&t(".k-animation-container").addClass("resize")}}),"false"===a.attr("data-highlightFirstFoundElement")&&t("#small-search-box-form").on("keydown",function(a){13===a.keyCode&&t(this).submit()}),t("#small-search-box-form").submit(function(e){var n=t("#instant-search-categories").val()||0,r=t("#small-searchterms").val();r&&(window.location.href=a.attr("data-homePageUrl")+"search?adv=true&cid="+n+"&q="+encodeURIComponent(r)+"&sid="+a.attr("data-searchInProductDescriptions")+"&isc=true"),e.preventDefault()}))})}(jQuery);
