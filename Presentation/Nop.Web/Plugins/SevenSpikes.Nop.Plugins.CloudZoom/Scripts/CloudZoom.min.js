/*
 * Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
 * http://www.nop-templates.com/t/licensinginfo
 */
! function (e, t) {
    e(document).ready(function () {
        var r = e(".cloudZoomAdjustPictureOnProductAttributeValueChange"),
            a = e(".cloudZoomPictureThumbnailsInCarouselData");
        if ("true" === r.attr("data-isIntegratedByWidget")) {
            var i = "#sevenspikes-cloud-zoom",
                o = function (t) {
                    var r = t.attr("data-selectorOfTheParentElementOfTheCloudZoomWindow");
                    if (void 0 != r && "" !== r) {
                        var a = e(r);
                        if (void 0 != a) {
                            var i = t.attr("data-zoomWindowElementId");
                            if (void 0 == i || "" === i) return;
                            var o = "<div id=" + i + ' style="position: absolute;"></div>';
                            e(a).prepend(o)
                        }
                    }
                },
                l = e(i),
                n = l.attr("data-defaultImageContainerSelector");
            if (void 0 == n || "" === n) return;
            if (!t.isMobile() && t.getViewPort().width > 980) {
                var u, c;
                e(n).each(function () {
                    e(this).find(i).length <= 0 ? u = e(this) : c = e(this)
                }), null != u && null != c && (u.replaceWith(c), c.show()), o(l), e.event.trigger({
                    type: "nopCloudZoomLoadCompletedEvent"
                })
            } else l.length > 0 && e(n).length > 1 && l.closest(".gallery").remove()
        }
        if (a.length > 0) {
            var s = parseInt(a.attr("data-numVisible")) || 4,
                d = "false" === a.attr("data-vertical");
            if (e("#carousel").jcarousel({
                vertical: d,
                numVisible: s,
                scroll: 1,
                wrap: "none",
                size: parseInt(a.attr("data-size")) || 0,
                rtl: "true" === a.attr("data-rtl")
            }), "false" === a.attr("data-vertical")) {
                var h = e("#carousel li").outerHeight(!0);
                e("#carousel").parent().css({
                    height: h * s + "px"
                })
            } else e("#carousel").css({
                width: "20000em",
                "font-size": "13px"
            });
            e(".jcarousel-prev, .jcarousel-next").disableTextSelect()
        }
        if (e(".cloudZoomEnableClickToZoom").length > 0 && e(".picture").on("click", ".mousetrap", function () {
                var t = new Array,
                    r = function (e, t) {
                        this.src = e, this.title = t
        };
                e(".picture-thumbs a.cloud-zoom-gallery").length < 1 && t.push(new r(e(".picture a.cloud-zoom").attr("href"), e(".picture a.cloud-zoom").attr("title"))), e(".picture-thumbs a.cloud-zoom-gallery").each(function () {
                    t.push(new r(e(this).attr("href"), e(this).attr("title")))
        });
                for (var a = 0, i = 0; i < t.length; i++)
                    if (t[i].src === e(".picture a.cloud-zoom").attr("href")) {
                        a = i;
                        break
        }
                e.magnificPopup.open({
            items: t,
            type: "image",
            removalDelay: 300,
            gallery: {
            enabled: !0
        }
        }, a)
        }), r.length > 0) {
            var p = r.attr("data-productId"),
                f = "_fullsize",
                m = "productAttributeValueAdjustmentTable_" + p;
            e('[id^="product_attribute_"]').each(function () {
                var t = e(this);
                t.closest(".product-variant-line").length > 0 || t.on("change", function () {
                    var r = t.attr("id"),
                        a = "";
                    if (t.is(":radio") && t.is(":checked") || t.is(":checkbox") && t.is(":checked")) a = window[m][r + f];
                    else if (t.is("select")) {
                        var i = t.find("option:selected").index(); -1 !== i && (a = window[m][r + f][i])
                    }
                    "string" == typeof a && "" !== a && (e('.cloud-zoom-gallery[href="' + a + '"]').click(), e.event.trigger({
                        type: "nopMainProductImageChanged",
                        target: t,
                        pictureDefaultSizeUrl: a,
                        pictureFullSizeUrl: a
                    }))
                })
            })
        }
    })
}(jQuery, sevenSpikes);